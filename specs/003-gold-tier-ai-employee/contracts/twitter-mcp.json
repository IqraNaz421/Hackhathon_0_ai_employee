{
  "server_name": "twitter-mcp",
  "protocol": "stdio",
  "version": "1.0.0",
  "description": "MCP server for Twitter/X integration - post tweets, retrieve engagement metrics, manage social media presence",
  "authentication": {
    "type": "oauth2",
    "flow": "authorization_code_pkce",
    "authorization_url": "https://twitter.com/i/oauth2/authorize",
    "token_url": "https://api.twitter.com/2/oauth2/token",
    "scopes": [
      "tweet.read",
      "tweet.write",
      "users.read",
      "offline.access"
    ],
    "token_storage": "os_credential_manager",
    "refresh_token_enabled": true,
    "token_type": "bearer",
    "token_notes": "OAuth 2.0 with PKCE (Proof Key for Code Exchange). Refresh tokens valid for 6 months with offline.access scope."
  },
  "rate_limits": {
    "requests_per_15_min": 100,
    "tweets_per_24_hours": 100,
    "user_rate_limit": "100 requests per 15 minutes per user",
    "app_rate_limit": "10000 requests per 24 hours per app (Pro tier)",
    "retry_strategy": "exponential_backoff",
    "backoff_delays": [1, 2, 4],
    "tier": "Basic",
    "tier_limits": {
      "free": "17 tweets per 24 hours",
      "basic": "100 tweets per 24 hours",
      "pro": "100 tweets per 15 minutes"
    }
  },
  "tools": [
    {
      "name": "post_tweet",
      "description": "Post a tweet to Twitter/X (requires approval via HITL workflow)",
      "parameters": {
        "type": "object",
        "required": ["text"],
        "properties": {
          "text": {
            "type": "string",
            "maxLength": 280,
            "description": "Tweet text content (max 280 characters)"
          },
          "reply_to_tweet_id": {
            "type": "string",
            "description": "Optional tweet ID to reply to"
          },
          "quote_tweet_id": {
            "type": "string",
            "description": "Optional tweet ID to quote"
          },
          "media_ids": {
            "type": "array",
            "items": {"type": "string"},
            "maxItems": 4,
            "description": "Optional array of media IDs to attach (max 4 images or 1 video)"
          },
          "poll_options": {
            "type": "array",
            "items": {"type": "string"},
            "minItems": 2,
            "maxItems": 4,
            "description": "Optional poll options (2-4 choices)"
          },
          "poll_duration_minutes": {
            "type": "integer",
            "minimum": 5,
            "maximum": 10080,
            "description": "Optional poll duration in minutes (5 min to 7 days)"
          },
          "reply_settings": {
            "type": "string",
            "enum": ["everyone", "mentionedUsers", "following"],
            "default": "everyone",
            "description": "Who can reply to this tweet"
          }
        }
      },
      "response": {
        "type": "object",
        "properties": {
          "tweet_id": {"type": "string"},
          "text": {"type": "string"},
          "created_at": {"type": "string", "format": "date-time"},
          "approval_request_id": {"type": "string"}
        }
      },
      "requires_approval": true,
      "approval_workflow": "Creates approval request in /Pending_Approval/, requires human approval before posting"
    },
    {
      "name": "delete_tweet",
      "description": "Delete a tweet from Twitter/X (requires approval via HITL workflow)",
      "parameters": {
        "type": "object",
        "required": ["tweet_id"],
        "properties": {
          "tweet_id": {
            "type": "string",
            "description": "Tweet ID to delete"
          },
          "reason": {
            "type": "string",
            "description": "Reason for deletion (for audit trail)"
          }
        }
      },
      "response": {
        "type": "object",
        "properties": {
          "success": {"type": "boolean"},
          "tweet_id": {"type": "string"},
          "deleted_at": {"type": "string", "format": "date-time"},
          "approval_request_id": {"type": "string"}
        }
      },
      "requires_approval": true,
      "approval_workflow": "Creates approval request in /Pending_Approval/, requires human approval before deletion"
    },
    {
      "name": "get_user_tweets",
      "description": "Retrieve recent tweets from authenticated user's timeline with public metrics",
      "parameters": {
        "type": "object",
        "properties": {
          "user_id": {
            "type": "string",
            "description": "Twitter user ID (defaults to authenticated user)"
          },
          "max_results": {
            "type": "integer",
            "minimum": 5,
            "maximum": 100,
            "default": 25,
            "description": "Number of tweets to retrieve (5-100)"
          },
          "start_time": {
            "type": "string",
            "format": "date-time",
            "description": "Retrieve tweets since this timestamp (ISO 8601)"
          },
          "end_time": {
            "type": "string",
            "format": "date-time",
            "description": "Retrieve tweets until this timestamp (ISO 8601)"
          },
          "exclude": {
            "type": "array",
            "items": {"type": "string", "enum": ["retweets", "replies"]},
            "description": "Exclude retweets or replies"
          }
        }
      },
      "response": {
        "type": "object",
        "properties": {
          "tweets": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "tweet_id": {"type": "string"},
                "text": {"type": "string"},
                "created_at": {"type": "string", "format": "date-time"},
                "author_id": {"type": "string"},
                "public_metrics": {
                  "type": "object",
                  "properties": {
                    "retweet_count": {"type": "integer"},
                    "reply_count": {"type": "integer"},
                    "like_count": {"type": "integer"},
                    "quote_count": {"type": "integer"},
                    "impression_count": {"type": "integer"}
                  }
                }
              }
            }
          },
          "meta": {
            "type": "object",
            "properties": {
              "result_count": {"type": "integer"},
              "newest_id": {"type": "string"},
              "oldest_id": {"type": "string"},
              "next_token": {"type": "string"}
            }
          }
        }
      },
      "requires_approval": false,
      "usage": "Used by weekly audit generator to retrieve tweet engagement metrics"
    },
    {
      "name": "get_tweet_metrics",
      "description": "Get detailed engagement metrics for a specific tweet including public and organic metrics",
      "parameters": {
        "type": "object",
        "required": ["tweet_id"],
        "properties": {
          "tweet_id": {
            "type": "string",
            "description": "Tweet ID to retrieve metrics for"
          },
          "include_private_metrics": {
            "type": "boolean",
            "default": false,
            "description": "Include non-public metrics (requires OAuth user context)"
          }
        }
      },
      "response": {
        "type": "object",
        "properties": {
          "tweet_id": {"type": "string"},
          "text": {"type": "string"},
          "created_at": {"type": "string", "format": "date-time"},
          "public_metrics": {
            "type": "object",
            "properties": {
              "retweet_count": {"type": "integer"},
              "reply_count": {"type": "integer"},
              "like_count": {"type": "integer"},
              "quote_count": {"type": "integer"},
              "impression_count": {"type": "integer"}
            }
          },
          "organic_metrics": {
            "type": "object",
            "properties": {
              "impression_count": {"type": "integer"},
              "like_count": {"type": "integer"},
              "reply_count": {"type": "integer"},
              "retweet_count": {"type": "integer"},
              "url_link_clicks": {"type": "integer"},
              "user_profile_clicks": {"type": "integer"}
            }
          }
        }
      },
      "requires_approval": false,
      "usage": "Used by weekly audit generator to analyze individual tweet performance"
    },
    {
      "name": "get_engagement_summary",
      "description": "Get aggregated Twitter engagement metrics for specified time period",
      "parameters": {
        "type": "object",
        "required": ["user_id", "start_time", "end_time"],
        "properties": {
          "user_id": {
            "type": "string",
            "description": "Twitter user ID (defaults to authenticated user)"
          },
          "start_time": {
            "type": "string",
            "format": "date-time",
            "description": "Start date for metrics (ISO 8601)"
          },
          "end_time": {
            "type": "string",
            "format": "date-time",
            "description": "End date for metrics (ISO 8601)"
          }
        }
      },
      "response": {
        "type": "object",
        "properties": {
          "user_id": {"type": "string"},
          "period": {"type": "string"},
          "total_tweets": {"type": "integer"},
          "total_retweets": {"type": "integer"},
          "total_likes": {"type": "integer"},
          "total_replies": {"type": "integer"},
          "total_quotes": {"type": "integer"},
          "total_impressions": {"type": "integer"},
          "engagement_rate": {"type": "number"},
          "generated_at": {"type": "string", "format": "date-time"}
        }
      },
      "requires_approval": false,
      "usage": "Used by weekly audit generator to calculate Twitter engagement summary for CEO briefing"
    }
  ],
  "health_check": {
    "endpoint": "/health",
    "method": "GET",
    "expected_response": {"status": "healthy", "connected": true}
  },
  "errors": [
    {"code": 401, "type": "UNAUTHORIZED", "message": "Authentication credentials missing or incorrect", "retry": true, "action": "refresh_token"},
    {"code": 403, "type": "FORBIDDEN", "message": "Request refused or access not allowed", "retry": false, "action": "check_permissions"},
    {"code": 404, "type": "NOT_FOUND", "message": "Resource not found (invalid tweet ID or user)", "retry": false},
    {"code": 429, "type": "TOO_MANY_REQUESTS", "message": "Rate limit exceeded (100 per 15 min)", "retry": true, "wait": 900},
    {"code": 400, "type": "BAD_REQUEST", "message": "Invalid request format or parameters", "retry": false},
    {"code": 409, "type": "CONFLICT", "message": "Duplicate tweet detected", "retry": false},
    {"code": 500, "type": "INTERNAL_SERVER_ERROR", "message": "Twitter API internal error", "retry": true, "wait": 60},
    {"code": 503, "type": "SERVICE_UNAVAILABLE", "message": "Twitter API temporarily unavailable", "retry": true, "wait": 60}
  ],
  "logging": {
    "log_file": "/Logs/twitter_mcp.log",
    "log_level": "INFO",
    "sanitize_credentials": true,
    "log_all_requests": true
  }
}
